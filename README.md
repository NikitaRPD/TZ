# Техническое задание (TZ)

## Описание задачи

Доделать микросервис, представляющий собой API с двумя эндпоинтами для управления хранилищем книг.

Цель — запустить сервис локально и обеспечить корректную работу эндпоинтов в Swagger.

Предполагается, что таблица "authors" уже заполнена данными. 
Для тестирования допускается вручную добавить авторов в базу данных.


---

## Требования к реализации

1. **Модели**
   - Создать необходимые модели для работы с данными книг и авторов.
   - Обеспечить связь между книгами и авторами.

2. **Миграции**
   - Сгенерировать и применить миграции для создания таблиц в базе данных.

3. **Эндпоинты**
   - Реализовать описанные выше эндпоинты:
     - `POST /api/books` для добавления новой книги.
     - `GET /api/books` для получения списка всех книг.

4. **Тестирование**
   - Убедиться, что эндпоинты корректно отображаются и тестируются в Swagger.

---

###  Для запуска локально:

`docker-compose up -d`

`poetry install`

`poetry run python -m src.main`

### Для создания миграций:

`poetry run alembic revision --autogenerate`

`poetry run alembic upgrade head`

---

## Функциональные требования

### API Эндпоинты

1. **Добавление новой книги**
   - **Метод:** `POST`
   - **URL:** `api/books`
   - **Описание:** Позволяет добавить новую книгу в хранилище.
   - **Структура входных данных:**
     ```json
     {
       "title": "The Great Gatsby",
       "authors": [
         "123e4567-e89b-12d3-a456-426614174000"
       ],
       "publication_year": 1925,
       "pages": 180,
       "genre": "Novel"
     }
     ```

2. **Получение списка всех книг**
   - **Метод:** `GET`
   - **URL:** `api/books`
   - **Описание:** Возвращает список всех книг, хранящихся в системе.
   - **Структура ответа:**
     ```json
     [
       {
       "id": "e2fcebf1-dfe5-4ddd-9cef-5c25c76afca8",
       "title": "The Great Gatsby",
       "authors": [
         "123e4567-e89b-12d3-a456-426614174000"
       ],
       "publication_year": 1925,
       "pages": 180,
       "genre": "Novel"
     }
     ]
     ```
